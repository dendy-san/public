Структура записи базы данных:

	       начальное
имя            значение             назначение

Email           пусто               адрес электронной почты
URL             пусто               адрес сайта
INFO            пусто               инфо повод
st1              1                  стиль убедительно-позитивный
st2              1                  стиль ироничный
st3              1                  стиль разговорный
st4              1                  стиль провокационный
st5              1                  стиль информационный
st6              1                  стиль офиц.-дел.
st7              1                  стиль сторителлинг
st8              1                  стиль продающий
st9              1                  стиль медицинский
Dt              текущее            время оплаты
W		из .env	            продолжительность сеанса
Price	        из .env	            цена услуги

Проверка времени сеанса осуществляется по формуле:
 Tt – Dt < W
Tt – текущее время в момент проверки
Dt – время зафиксированное при оплате (первичном формировании записи)
W – продолжительность сеанса услуги

Price используется при формировании цены услуги в модуле ЮКасса.

В начале модуля генерации публикаций (с целью оптимизации) значения полей записи базы присваиваются внутренним переменным, а каждый раз перед обновлением записи ее поля получают значения от соответствующих внутренних переменных. Т.о. экономится время на обращениях к базе.



Текстовое описание блок-схемы

01)	ВХОД С ПАРАМЕТРОМ E-mail (этот блок – вход нового пользователя!)
02)	ПРОВЕРКА E-mail на наличие в базе: НЕТ  переход на блок 05
03)	ПРОВЕРКА ВРЕМЕНИ сеанса: ДА время есть   переход на блок 11 (Модуль генерации публикаций)
04)	УДАЛЕНИЕ ЗАПИСИ из базы
05)	Сообщение об отсутствии оплаченной услуги

---- Переход к оплате. 

06)	ОПЛАТА. В случае отказа переход на блок 01.
07)	ФОРМИРОВАНИЕ КЛИЕНТСКОЙ ЗАПИСИ в базе с начальными значениями (смотри выше – структура записи). В том числе присвоение значений в клиентскую запись W и Price из redis
08)	ПРИЕМ URL И ИНФОПОВОД (ввод клиентом) в переменные URL и INFO
09)     СОХРАНЕНИЕ URL и INFO в соответствующих полях БД
10)     ПЕРЕХОД на блок 13

Модуль генерации публикаций. Циклическая часть

11) ЗАПУСК ГЕНЕРАТОРА, это только обращение к нему с передачей номера записи базы
12) ПРИСВОЕНИЕ ЗНАЧЕНИЙ управляющим переменным из полей записи БД
13) ПРИЕМ СТИЛЯ от пользователя, сохранение его в соответствующей управляющей переменной
14) ПАРСИНГ САЙТА с сохранением результатов для последующих повторных генераций

15) ГЕНЕРАЦИЯ ПУБЛИКАЦИЙ выбранного стиля и их вывод на экран
16) ОБНОВЛЕНИЕ ЗАПИСИ в базе: присвоение значений управляющих переменных  st1, st2, … st9 соответствующим полям записи и обновление этой записи в базе
17) ВЫВОД ПУБЛИКАЦИЙ на внешнее устройство по кнопке сохранения (действие не обязательное, по инициативе пользователя)
18) ПОВТОР – переход на новую генерацию публикаций ПО КЛИКУ ПОЛЬЗОВАТЕЛЯ на кнопку Создать новые публикации.
19) ПРОВЕРКА ВРЕМЕНИ сеанса: ДА - время сеанса истекло  переход на блок 22
20) ПРОВЕРКА СТИЛЕЙ (наличия неиспользованных стилей): Неиспользованных стилей НЕТ  переход на блок 23
21) ПРИЕМ СТИЛЯ (выбор пользователем стиля)  переход на блок 15
22) СООБЩЕНИЕ об окончании сеанса       /       23) СООБЩЕНИЕ об исчерпании стилей

--- Сообщения в блоках 22 и 23 в виде модальных выпадающих окон с крестиком закрытия. По закрытию модального окна переход на блок 24.

24) УДАЛЕНИЕ КЛИЕНТСКОЙ ЗАПИСИ из базы. 
ПЕРЕХОД на блок 06.
