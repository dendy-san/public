# üöÄ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ VPS

## –ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ VPS –ø–æ SSH:**
   ```bash
   ssh user@your-vps-ip
   ```

2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞:**
   ```bash
   cd /path/to/public
   ```

3. **–°–∫–∞—á–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–µ—Å–ª–∏ –µ–≥–æ –µ—â–µ –Ω–µ—Ç):**
   ```bash
   # –°–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –µ—Å–ª–∏ –Ω–µ—Ç - —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ deploy-update.sh –Ω–∞ VPS
   ```

4. **–°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:**
   ```bash
   chmod +x deploy-update.sh
   ./deploy-update.sh
   ```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ VPS:**
   ```bash
   ssh user@your-vps-ip
   cd /path/to/public
   ```

2. **–ü–æ–ª—É—á–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ Git:**
   ```bash
   git fetch origin
   git pull origin main
   ```

3. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:**
   ```bash
   docker compose down
   ```

4. **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑—ã:**
   ```bash
   docker compose build --no-cache
   ```

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:**
   ```bash
   docker compose up -d
   ```

6. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:**
   ```bash
   docker compose ps
   docker compose logs --tail=50 backend
   ```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ü–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª `.env` —Å–æ—Ö—Ä–∞–Ω–µ–Ω** - –æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–∞–∂–Ω—ã–µ API –∫–ª—é—á–∏ –∏ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ Git
2. **–°–¥–µ–ª–∞–π—Ç–µ backup** –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Redis (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
   ```bash
   docker compose exec redis redis-cli BGSAVE
   ```

### –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å:**
   - Frontend: `http://your-vps-ip:3000`
   - Backend API: `http://your-vps-ip:8000/docs`
   - Admin –ø–∞–Ω–µ–ª—å: `http://your-vps-ip:3001`

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏:**
   ```bash
   docker compose logs backend
   docker compose logs frontend
   ```

## üîÑ –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)

–ï—Å–ª–∏ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ backup, —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç–æ–º:**
   ```bash
   docker compose down
   cd ..
   rm -rf public
   cp -r backup_YYYYMMDD_HHMMSS public
   cd public
   docker compose up -d
   ```

2. **–ò–ª–∏ –æ—Ç–∫–∞—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ Git:**
   ```bash
   git log  # –Ω–∞–π–¥–∏—Ç–µ —Ö–µ—à –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –∫–æ–º–º–∏—Ç–∞
   git reset --hard <commit-hash>
   docker compose build --no-cache
   docker compose up -d
   ```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º

- [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VPS —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –§–∞–π–ª `.env` —Å–æ—Ö—Ä–∞–Ω–µ–Ω –∏ –Ω–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω
- [ ] –ï—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é GitHub (—Ç–æ–∫–µ–Ω –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
- [ ] Docker –∏ Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –°–¥–µ–ª–∞–Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –≤–∞–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "Permission denied" –ø—Ä–∏ git pull:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
ls -la
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
```

### –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ Docker –æ–±—Ä–∞–∑–æ–≤:
```bash
# –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à Docker
docker system prune -a
# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞
docker compose build --no-cache
```

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker compose logs
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
docker compose ps -a
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤
netstat -tulpn | grep -E '3000|8000|3001'
```

