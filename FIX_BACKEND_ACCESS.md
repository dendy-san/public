# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –° –î–û–°–¢–£–ü–û–ú –ö –ë–≠–ö–ï–ù–î–£

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
–ë—ç–∫–µ–Ω–¥ –Ω–µ –æ—Ç–∫–ª–∏–∫–∞–µ—Ç—Å—è –Ω–∞ `http://5.101.4.137:8000`

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ VPS
```bash
ssh -p –ü–û–†–¢_SSH –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨@5.101.4.137
```

–ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—Ç–µ –ø–æ—Ä—Ç SSH, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π:
```bash
ssh root@5.101.4.137
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
cd /root/public
docker compose ps
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ `Up` –∏ `healthy`

**–ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã:**
```bash
docker compose up -d
```

**–ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã, –Ω–æ unhealthy:**
```bash
docker compose logs backend
docker compose logs redis
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç—ã –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—é—Ç—Å—è
```bash
sudo netstat -tlnp | grep -E '3000|8000|3001'
# –∏–ª–∏
sudo ss -tlnp | grep -E '3000|8000|3001'
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã –ø–æ—Ä—Ç—ã:
- `0.0.0.0:8000` - Backend
- `0.0.0.0:3000` - Frontend
- `0.0.0.0:3001` - Admin Frontend

**–ï—Å–ª–∏ –ø–æ—Ä—Ç—ã –Ω–µ –≤–∏–¥–Ω—ã:**
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã –∏–ª–∏ –Ω–µ —Å–ª—É—à–∞—é—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker compose logs backend`

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Firewall
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å firewall
sudo ufw status

# –ï—Å–ª–∏ firewall –∞–∫—Ç–∏–≤–µ–Ω, –æ—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç—ã:
sudo ufw allow 8000/tcp
sudo ufw allow 3000/tcp
sudo ufw allow 3001/tcp
sudo ufw allow 8081/tcp

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ iptables (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
sudo iptables -L -n | grep -E '8000|3000|3001'
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Backend
```bash
docker compose logs backend --tail=100
```

**–ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏:**
- –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Redis
- –û—à–∏–±–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î
- –û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞ –º–æ–¥—É–ª–µ–π
- –û—à–∏–±–∫–∏ API –∫–ª—é—á–µ–π

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Backend –æ—Ç–≤–µ—á–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker compose exec backend curl http://localhost:8000/health

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Backend —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—Ç—É
docker compose exec backend netstat -tlnp | grep 8000
```

## üîß –†–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
cd /root/public
docker compose down
docker compose up -d
```

### –†–µ—à–µ–Ω–∏–µ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Firewall
```bash
# Ubuntu/Debian
sudo ufw allow 8000/tcp
sudo ufw allow 3000/tcp
sudo ufw allow 3001/tcp
sudo ufw reload

# CentOS/RHEL
sudo firewall-cmd --permanent --add-port=8000/tcp
sudo firewall-cmd --permanent --add-port=3000/tcp
sudo firewall-cmd --permanent --add-port=3001/tcp
sudo firewall-cmd --reload
```

### –†–µ—à–µ–Ω–∏–µ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Docker
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–±—Ä–æ—à–µ–Ω—ã
docker compose config | grep -A 5 backend

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# ports:
#   - "8000:8000"
```

### –†–µ—à–µ–Ω–∏–µ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ .env —Ñ–∞–π–ª–∞
```bash
cd /root/public
cat .env | grep -E 'ENVIRONMENT|REDIS|DB_PATH'
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
- `ENVIRONMENT=prod` (–¥–ª—è production)
- `REDIS_URL=redis://redis:6379`
- `DB_PATH=/app/data/sessions.db`

### –†–µ—à–µ–Ω–∏–µ 5: –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
```bash
cd /root/public
docker compose down
docker compose build --no-cache
docker compose up -d
```

### –†–µ—à–µ–Ω–∏–µ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ VPS –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
–ù–µ–∫–æ—Ç–æ—Ä—ã–µ VPS –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∏–º–µ—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π firewall –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VPS (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç—ã 8000, 3000, 3001 –æ—Ç–∫—Ä—ã—Ç—ã –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üß™ –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –° –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:
```bash
# Windows PowerShell
Test-NetConnection -ComputerName 5.101.4.137 -Port 8000

# Linux/Mac
curl -v http://5.101.4.137:8000/health
```

### –° VPS:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–Ω—É—Ç—Ä–∏ VPS
curl http://localhost:8000/health
curl http://127.0.0.1:8000/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å –≤–Ω–µ—à–Ω–µ–≥–æ IP (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
curl http://5.101.4.137:8000/health
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

- [ ] VPS –¥–æ—Å—Ç—É–ø–µ–Ω (ping —Ä–∞–±–æ—Ç–∞–µ—Ç)
- [ ] –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã (`docker compose ps`)
- [ ] Backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Å—Ç–∞—Ç—É—Å–µ `Up` –∏ `healthy`
- [ ] –ü–æ—Ä—Ç 8000 –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ—Ç—Å—è (`netstat -tlnp | grep 8000`)
- [ ] Firewall —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –ø–æ—Ä—Ç 8000 (`ufw status`)
- [ ] Backend –æ—Ç–≤–µ—á–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (`docker compose exec backend curl http://localhost:8000/health`)
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö (`docker compose logs backend`)
- [ ] .env —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –ü—Ä–æ–≤–∞–π–¥–µ—Ä VPS –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ä—Ç—ã

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

1. **–ü–æ–ª–Ω—ã–µ –ª–æ–≥–∏:**
   ```bash
   docker compose logs > /tmp/docker-logs.txt
   docker ps -a > /tmp/docker-ps.txt
   docker network ls > /tmp/docker-networks.txt
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   ```bash
   docker compose config > /tmp/docker-config.txt
   ```

3. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å Backend –≤—Ä—É—á–Ω—É—é:**
   ```bash
   docker compose exec backend python -m uvicorn app.main:app --host 0.0.0.0 --port 8000
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Backend —Å–ª—É—à–∞–µ—Ç –Ω–∞ 0.0.0.0, –∞ –Ω–µ –Ω–∞ 127.0.0.1:**
   ```bash
   docker compose exec backend netstat -tlnp
   ```

## üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, —Å–æ–±–µ—Ä–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
```bash
# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ —Ñ–∞–π–ª –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
{
  echo "=== Docker Compose Status ==="
  docker compose ps
  echo ""
  echo "=== Backend Logs ==="
  docker compose logs backend --tail=50
  echo ""
  echo "=== Network Status ==="
  sudo netstat -tlnp | grep -E '3000|8000|3001'
  echo ""
  echo "=== Firewall Status ==="
  sudo ufw status
} > /tmp/diagnostic-info.txt
```

–ó–∞—Ç–µ–º –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `/tmp/diagnostic-info.txt` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.
